window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},function(n,l){l.dhl_post_label={params:{},init:function(){var e=l.dhl_post_label;e.params=wc_gzd_admin_deutsche_post_label_params,n(document.body).on("wc_gzd_admin_shipment_modal_after_load_success",e.onLoadLabelModal)},onLoadLabelModal:function(e,d,a){var i,t=l.dhl_post_label;a.$modal.off("change.gzd-dp-fields"),a.$modal.on("change.gzd-dp-fields","#wc-gzd-shipment-label-admin-fields-deutsche_post #product_id, #wc-gzd-shipment-label-admin-fields-deutsche_post #wc-gzd-shipment-label-wrapper-additional-services :input",{adminShipmentModal:a},t.onRefreshPreview),0<a.$modal.find("#wc-gzd-shipment-label-admin-fields-deutsche_post").length&&((i=new n.Event("change")).data={adminShipmentModal:a},t.onRefreshPreview(i))},getSelectedAdditionalServices:function(){return n("#wc-gzd-shipment-label-wrapper-additional-services :input:checked").map(function(){return n(this).attr("name").replace("service_","")}).get()},onRefreshPreview:function(e){var d=l.dhl_post_label,a=e.data.adminShipmentModal,e={};e.security=d.params.refresh_label_preview_nonce,e.product_id=d.getProductId(),e.selected_services=d.getSelectedAdditionalServices(),e.action="woocommerce_gzd_dhl_refresh_deutsche_post_label_preview",a.doAjax(e,d.onPreviewSuccess)},onPreviewSuccess:function(e){var d=l.dhl_post_label,a=n(".wc-gzd-dhl-im-product-data .col-preview"),i=n(".wc-gzd-dhl-im-product-data").find(".image-preview");e.is_wp_int?a.parents(".wc-gzd-shipment-create-label").find(".page_format_field").hide():a.parents(".wc-gzd-shipment-create-label").find(".page_format_field").show(),e.preview_url?(a.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),i.find(".stamp-preview").length<=0&&i.append('<img class="stamp-preview" style="display: none;" />'),d.replaceProductData(e.preview_data),i.find(".stamp-preview").prop("src",e.preview_url).on("load",function(){a.unblock(),n(this).show()})):i.html("")},getProductId:function(){return n("#wc-gzd-shipment-label-admin-fields-deutsche_post #product_id").val()},replaceProductData:function(d){l.dhl_post_label;var e=n(".wc-gzd-shipment-create-label").find(".wc-gzd-dhl-im-product-data");e.find(".data-placeholder").html(""),e.find(".data-placeholder").each(function(){var e=n(this).data("replace");d.hasOwnProperty(e)?(n(this).html(d[e]),n(this).show()):n(this).hide()})}},n(document).ready(function(){germanized.admin.dhl_post_label.init()})}(jQuery,window.germanized.admin);